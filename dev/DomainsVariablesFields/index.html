<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Domains, Variables, Fields, and Data arrays. · PALEOboxes Documentation</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PALEOboxes Documentation</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Design</span><ul><li><a class="tocitem" href="../DesignOverview/">PALEOboxes coupler design</a></li><li><a class="tocitem" href="../CreateInitializeLoop/">Control flow</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li class="is-active"><a class="tocitem" href>Domains, Variables, Fields, and Data arrays.</a><ul class="internal"><li><a class="tocitem" href="#Model"><span>Model</span></a></li><li><a class="tocitem" href="#Domains"><span>Domains</span></a></li><li><a class="tocitem" href="#Variables"><span>Variables</span></a></li><li><a class="tocitem" href="#Fields"><span>Fields</span></a></li><li><a class="tocitem" href="#Spaces"><span>Spaces</span></a></li><li><a class="tocitem" href="#Data-types"><span>Data types</span></a></li></ul></li><li><a class="tocitem" href="../Solver API/">Solver API</a></li><li><a class="tocitem" href="../Reaction API/">Reaction API</a></li><li><a class="tocitem" href="../ReactionCatalog/">Generic Reaction catalog</a></li></ul></li><li><a class="tocitem" href="../References/">References</a></li><li><a class="tocitem" href="../indexpage/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li class="is-active"><a href>Domains, Variables, Fields, and Data arrays.</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Domains, Variables, Fields, and Data arrays.</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/master/docs/src/DomainsVariablesFields.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Domains,-Variables,-Fields,-and-Data-arrays."><a class="docs-heading-anchor" href="#Domains,-Variables,-Fields,-and-Data-arrays.">Domains, Variables, Fields, and Data arrays.</a><a id="Domains,-Variables,-Fields,-and-Data-arrays.-1"></a><a class="docs-heading-anchor-permalink" href="#Domains,-Variables,-Fields,-and-Data-arrays." title="Permalink"></a></h1><p>A <a href="#PALEOboxes.Model"><code>Model</code></a> contains <a href="#PALEOboxes.Domain"><code>Domain</code></a>s, each of which contain <a href="#Variables">Variables</a> defining <a href="#PALEOboxes.Field"><code>Field</code></a>s which contain <code>Data</code> arrays, and <code>Reactions</code> with <a href="../Reaction API/#PALEOboxes.ReactionMethod"><code>ReactionMethod</code></a>s that operate on the <a href="#PALEOboxes.Field"><code>Field</code></a>s to calculate model time evolution.</p><h2 id="Model"><a class="docs-heading-anchor" href="#Model">Model</a><a id="Model-1"></a><a class="docs-heading-anchor-permalink" href="#Model" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Model" href="#PALEOboxes.Model"><code>PALEOboxes.Model</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Model</code></pre><p>A biogeochemical model consisting of <a href="#PALEOboxes.Domain"><code>Domain</code></a>s, created from a <a href="https://en.wikipedia.org/wiki/YAML">YAML</a> configuration file using <a href="../Solver API/#PALEOboxes.create_model_from_config-Tuple{AbstractString, AbstractString}"><code>create_model_from_config</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Model.jl#L6-L11">source</a></section></article><h2 id="Domains"><a class="docs-heading-anchor" href="#Domains">Domains</a><a id="Domains-1"></a><a class="docs-heading-anchor-permalink" href="#Domains" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Domain" href="#PALEOboxes.Domain"><code>PALEOboxes.Domain</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Domain</code></pre><p>A model region containing Variables and Reactions that act on them.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Domain.jl#L2-L6">source</a></section></article><h3 id="Grids"><a class="docs-heading-anchor" href="#Grids">Grids</a><a id="Grids-1"></a><a class="docs-heading-anchor-permalink" href="#Grids" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.AbstractMesh" href="#PALEOboxes.AbstractMesh"><code>PALEOboxes.AbstractMesh</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractMesh</code></pre><p>Defines additional geometric and topological information for <a href="#PALEOboxes.Domain"><code>PB.Domain</code></a></p><p>Concrete subtypes should implement methods:</p><p><a href="#PALEOboxes.internal_size"><code>PB.internal_size</code></a>, optionally <a href="#PALEOboxes.cartesian_size"><code>PB.cartesian_size</code></a></p><p><a href="#PALEOboxes.Grids.set_subdomain!"><code>PB.Grids.set_subdomain!</code></a>, <a href="#PALEOboxes.Grids.get_subdomain"><code>PB.Grids.get_subdomain</code></a></p><p><a href="../Solver API/#PALEOboxes.Grids.create_default_cellrange"><code>PB.Grids.create_default_cellrange</code></a>, <a href="#PALEOboxes.Grids.get_region"><code>PB.Grids.get_region</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L125-L137">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.internal_size" href="#PALEOboxes.internal_size"><code>PALEOboxes.internal_size</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">internal_size(mesh::AbstractMesh) -&gt; NTuple{ndims, Int}</code></pre><p>Array size to use for per-cell model Variables.</p><p>All <code>AbstractMesh</code> concrete subtypes (UnstructuredVectorGrid, CartesianLinearGrid, ...) should implement this method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L53-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.cartesian_size" href="#PALEOboxes.cartesian_size"><code>PALEOboxes.cartesian_size</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cartesian_size(mesh::AbstractMesh) -&gt; NTuple{ndims, Int}</code></pre><p>Optional (only regular Cartesian grids should implement this method): Array size of Cartesian Domain.</p><p>NB: this may be different from <code>internal_size</code> if the <code>mesh</code> implements a mapping  eg to a Vector for internal model Variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L62-L69">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.set_subdomain!" href="#PALEOboxes.Grids.set_subdomain!"><code>PALEOboxes.Grids.set_subdomain!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">set_subdomain!(grid::PB.AbstractMesh, subdomainname::AbstractString, subdom::PB.AbstractSubdomain, allowcreate::Bool=false)</code></pre><p>Set Subdomain</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L164-L168">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.get_subdomain" href="#PALEOboxes.Grids.get_subdomain"><code>PALEOboxes.Grids.get_subdomain</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_subdomain(grid::PB.AbstractMesh, subdomainname::AbstractString) -&gt; PB.AbstractSubdomain</code></pre><p>Get Subdomain</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L177-L181">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.UnstructuredVectorGrid" href="#PALEOboxes.Grids.UnstructuredVectorGrid"><code>PALEOboxes.Grids.UnstructuredVectorGrid</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">UnstructuredVectorGrid &lt;: PB.AbstractMesh</code></pre><p>Minimal Grid for a Vector Domain, defines only some named cells for plotting</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L221-L225">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.UnstructuredColumnGrid" href="#PALEOboxes.Grids.UnstructuredColumnGrid"><code>PALEOboxes.Grids.UnstructuredColumnGrid</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">UnstructuredColumnGrid &lt;: PB.AbstractMesh</code></pre><p>Minimal Grid for a Vector Domain composed of columns (not necessarily forming a 2-D array).</p><p><strong>Fields</strong></p><ul><li><code>ncells::Int</code> total number of cells in this Domain</li><li><code>Icolumns::Vector{Vector{Int}}</code>: Icolumns[n] should be the indices of column n, in order from surface to floor, where n is also the index of </li></ul><p>any associated boundary surface.</p><ul><li><code>z_coords::Vector{FixedCoord}</code>: z coordinates of cell mid point, lower surface, upper surface</li><li><code>columnnames::Vector{Symbol}:</code> optional column names</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L278-L289">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.CartesianLinearGrid" href="#PALEOboxes.Grids.CartesianLinearGrid"><code>PALEOboxes.Grids.CartesianLinearGrid</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CartesianLinearGrid &lt;: PB.AbstractMesh</code></pre><p>nD grid with netcdf CF1.0 coordinates, using Vectors for PALEO internal representation of Variables, with a mapping linear indices &lt;–&gt; some subset of grid indices.</p><p>The linear indices mapping should be set with <code>set_linear_index</code>. Conversion of Field values between the PALEO internal representation (a Vector with a linear index) and a Cartesian Array with multiple dimensions (for import and export of model output) is then implemented by <code>cartesian_to_internal</code> and <code>internal_to_cartesian</code>.</p><p><strong>Fields</strong></p><ul><li><code>ncells::Int64</code>: number of cells in Domain = <code>length(linear_index)</code> (may be subset of total points in <code>prod(dims)</code>)</li><li><code>dimnames::Vector{String}</code>: names of dimensions (ordered list)</li><li><code>dims::Vector{Int}</code>: sizes of dimensions (ordered list)</li><li><code>coords::Vector{Vector{Float64}}</code>: attached cell-centre coordinates for each dimension (ordered list)</li><li><code>coords_edges::Vector{Vector{Float64}}</code>: attached cell-edge coordinates for each dimension (ordered list)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L369-L385">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.CartesianArrayGrid" href="#PALEOboxes.Grids.CartesianArrayGrid"><code>PALEOboxes.Grids.CartesianArrayGrid</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CartesianArrayGrid &lt;: PB.AbstractMesh</code></pre><p>nD grid with netcdf CF1.0 coordinates, using n-dimensional Arrays for PALEO internal representation of Variables</p><p><strong>Fields</strong></p><ul><li><code>ncells::Int64</code>: number of cells in Domain = <code>length(linear_index)</code> (may be subset of total points in <code>prod(dims)</code>)</li><li><code>dimnames::Vector{String}</code>: names of dimensions (ordered list)</li><li><code>dims::Vector{Int}</code>: sizes of dimensions (ordered list)</li><li><code>coords::Vector{Vector{Float64}}</code>: attached cell-centre coordinates for each dimension (ordered list)</li><li><code>coords_edges::Vector{Vector{Float64}}</code>: attached cell-edge coordinates for each dimension (ordered list)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L425-L436">source</a></section></article><h4 id="Subdomains"><a class="docs-heading-anchor" href="#Subdomains">Subdomains</a><a id="Subdomains-1"></a><a class="docs-heading-anchor-permalink" href="#Subdomains" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.AbstractSubdomain" href="#PALEOboxes.AbstractSubdomain"><code>PALEOboxes.AbstractSubdomain</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSubdomain</code></pre><p>Defines the relationship between two <a href="@ref"><code>Domain</code></a>s by mapping indices in one Domain to related indices in the other, eg interior cells adjacent to a boundary.</p><p>Concrete subtypes should implement:</p><p><a href="#PALEOboxes.Grids.subdomain_view"><code>subdomain_view</code></a></p><p><a href="#PALEOboxes.Grids.subdomain_indices"><code>subdomain_indices</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L11-L22">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.BoundarySubdomain" href="#PALEOboxes.Grids.BoundarySubdomain"><code>PALEOboxes.Grids.BoundarySubdomain</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BoundarySubdomain &lt;: PB.AbstractSubdomain</code></pre><p>A 2D subdomain corresponding to the 2D boundary Domain associated with a 3D interior Domain:</p><ul><li><code>indices[ibnd]</code> is the index of the 3D interior cell corresponding to a 2D boundary cell <code>ibnd</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L25-L30">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.InteriorSubdomain" href="#PALEOboxes.Grids.InteriorSubdomain"><code>PALEOboxes.Grids.InteriorSubdomain</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">InteriorSubdomain &lt;: PB.AbstractSubdomain</code></pre><p>A 3D subdomain corresponding to the 3D interior Domain associated with a 2D boundary Domain: <code>indices[iint]</code> is either:</p><ul><li><code>missing</code> if <code>iint</code> is the index of an interior cell in the 3D Domain, or</li><li>the index of the 2D boundary Domain cell corresponding to the boundary-adjacent 3D interior Domain cell <code>iint</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L55-L61">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.subdomain_view" href="#PALEOboxes.Grids.subdomain_view"><code>PALEOboxes.Grids.subdomain_view</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">subdomain_view(values, subdomain::BoundarySubdomain) -&gt; view</code></pre><p>Create a <code>view</code> on <code>values</code> in an interior <code>Domain</code> to access cells corresponding to indices in a boundary <code>Domain</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L35-L40">source</a></section><section><div><pre><code class="nohighlight hljs">subdomain_view(values, subdomain::InteriorSubdomain) -&gt; var</code></pre><p>Return unmodified <code>values</code> from a boundary <code>Domain</code>, <code>indices</code> to access  from interior supplied by <a href="#PALEOboxes.Grids.subdomain_indices"><code>subdomain_indices</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L77-L82">source</a></section><section><div><pre><code class="nohighlight hljs">subdomain_view(values, subdomain::Nothing) -&gt; values</code></pre><p>Fallback when <code>subdomain == nothing</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L101-L105">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.subdomain_indices" href="#PALEOboxes.Grids.subdomain_indices"><code>PALEOboxes.Grids.subdomain_indices</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">subdomain_indices(subdomain::BoundarySubdomain) -&gt; nothing</code></pre><p>No additional indices required to access Variables in an interior <code>Domain</code> from a boundary <code>Domain</code> (view created by <a href="#PALEOboxes.Grids.subdomain_view"><code>subdomain_view</code></a> is sufficient).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L45-L50">source</a></section><section><div><pre><code class="nohighlight hljs">subdomain_indices(subdomain::InteriorSubdomain) -&gt; indices</code></pre><p>Return <code>indices</code> to access Variables in a boundary <code>Domain</code> from interior <code>Domain</code> (will have <code>missing</code> entries where interior cells do not correspond to boundary)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L87-L92">source</a></section><section><div><pre><code class="nohighlight hljs">subdomain_indices(subdomain::Nothing) -&gt; nothing</code></pre><p>fallback when <code>subdomain == nothing</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L110-L114">source</a></section></article><h4 id="Regions,-Dimensions-and-Coordinates"><a class="docs-heading-anchor" href="#Regions,-Dimensions-and-Coordinates">Regions, Dimensions and Coordinates</a><a id="Regions,-Dimensions-and-Coordinates-1"></a><a class="docs-heading-anchor-permalink" href="#Regions,-Dimensions-and-Coordinates" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Grids.get_region" href="#PALEOboxes.Grids.get_region"><code>PALEOboxes.Grids.get_region</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_region(grid::Union{PB.AbstractMesh, Nothing}, values; selectargs...) -&gt; values_subset, (dim_subset::NamedDimension, ...)</code></pre><p>Return the subset of <code>values</code> given by <code>selectargs</code> (Grid-specific keywords eg cell=, column=, ...) and corresponding dimensions (with attached coordinates).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L156-L161">source</a></section><section><div><pre><code class="nohighlight hljs">get_region(grid::Nothing, values) -&gt; values[]</code></pre><p>Fallback for Domain with no grid, assumed 1 cell</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L206-L210">source</a></section><section><div><pre><code class="nohighlight hljs">get_region(grid::UnstructuredVectorGrid, values; cell) -&gt; 
    values_subset, (dim_subset::NamedDimension, ...)</code></pre><p><strong>Keywords for region selection:</strong></p><ul><li><code>cell::Union{Int, Symbol}</code>: an Int, or a Symbol to look up in <code>cellnames</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L243-L249">source</a></section><section><div><pre><code class="nohighlight hljs">get_region(grid::UnstructuredColumnGrid, values; column, [cell=nothing]) -&gt; 
    values_subset, (dim_subset::NamedDimension, ...)</code></pre><p><strong>Keywords for region selection:</strong></p><ul><li><code>column::Union{Int, Symbol}</code>: (may be an Int, or a Symbol to look up in <code>columnames</code>)</li><li><code>cell::Int</code>: optional cell index within <code>column</code>, highest cell is cell 1</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L311-L318">source</a></section><section><div><pre><code class="nohighlight hljs">get_region(grid::Union{CartesianLinearGrid{2}, CartesianArrayGrid{2}} , internalvalues; [i=i_idx], [j=j_idx]) -&gt;
    arrayvalues_subset, (dim_subset::NamedDimension, ...)</code></pre><p><strong>Keywords for region selection:</strong></p><ul><li><code>i::Int</code>: optional, slice along first dimension</li><li><code>j::Int</code>: optional, slice along second dimension</li></ul><p><code>internalvalues</code> are transformed if needed from internal Field representation as a Vector length <code>ncells</code>, to an Array (2D if neither i, j arguments present, 1D if i or j present, 0D ie one cell if both present)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L471-L481">source</a></section><section><div><pre><code class="nohighlight hljs">get_region(grid::Union{CartesianLinearGrid{3}, CartesianArrayGrid{3}}, internalvalues; [i=i_idx], [j=j_idx]) -&gt;
    arrayvalues_subset, (dim_subset::NamedDimension, ...)</code></pre><p><strong>Keywords for region selection:</strong></p><ul><li><code>i::Int</code>: optional, slice along first dimension</li><li><code>j::Int</code>: optional, slice along second dimension</li><li><code>k::Int</code>: optional, slice along third dimension</li></ul><p><code>internalvalues</code> are transformed if needed from internal Field representation as a Vector length <code>ncells</code>, to an Array (3D if neither i, j, k arguments present, 2D if one of i, j or k present, 1D if two present, 0D ie one cell if i, j, k all specified).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Grids.jl#L489-L501">source</a></section></article><p>Grids may define name dimensions and attach coordinates for the convenience of output visualisation. Any coordinate information required by Reactions should be supplied as Variables.</p><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.NamedDimension" href="#PALEOboxes.NamedDimension"><code>PALEOboxes.NamedDimension</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NamedDimension</code></pre><p>A named dimension, with optional attached fixed coordinates <code>coords</code></p><p>PALEO convention is that where possible <code>coords</code> contains three elements, for cell midpoints, lower edges, upper edges, in that order.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/CoordsDims.jl#L119-L126">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.FixedCoord" href="#PALEOboxes.FixedCoord"><code>PALEOboxes.FixedCoord</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FixedCoord</code></pre><p>A fixed (state independent) coordinate</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/CoordsDims.jl#L6-L10">source</a></section></article><h2 id="Variables"><a class="docs-heading-anchor" href="#Variables">Variables</a><a id="Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Variables" title="Permalink"></a></h2><p>PALEO <code>Variables</code> exist in <a href="#PALEOboxes.Domain"><code>Domain</code></a>s and represent biogeochemical or other quantities. They are defined by <code>Reactions</code> as <a href="#PALEOboxes.VariableReaction"><code>VariableReaction</code></a>s which are then linked to create <a href="#PALEOboxes.VariableDomain"><code>VariableDomain</code></a>s, and contain <a href="#PALEOboxes.Field"><code>Field</code></a>s which represent data (a subtype of <a href="#PALEOboxes.AbstractData"><code>AbstractData</code></a>) in a function space (a subtype of <a href="#PALEOboxes.AbstractSpace"><code>AbstractSpace</code></a>) with dimensions defined by the Domain grid (a subtype of <a href="#PALEOboxes.AbstractMesh"><code>AbstractMesh</code></a>)</p><p>Dataflow dependency between <code>Variables</code> is represented by two pairings:</p><ul><li><a href="#PALEOboxes.VariableReaction"><code>VariableReaction</code></a>s of <a href="#PALEOboxes.VariableType"><code>VariableType</code></a> <code>VT_ReactProperty</code> and <code>VT_ReactDependency</code> which are linked to create <a href="#PALEOboxes.VariableDomPropDep"><code>VariableDomPropDep</code></a>s</li><li><a href="#PALEOboxes.VariableReaction"><code>VariableReaction</code></a>s of <a href="#PALEOboxes.VariableType"><code>VariableType</code></a> <code>VT_ReactTarget</code> and <code>VT_ReactContributor</code> which are linked to create  <a href="#PALEOboxes.VariableDomContribTarget"><code>VariableDomContribTarget</code></a>s.</li></ul><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.VariableBase" href="#PALEOboxes.VariableBase"><code>PALEOboxes.VariableBase</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VariableBase</code></pre><p>A <code>Model</code> biogeochemical <code>Variable</code>. <code>Reaction</code>s access <code>Variable</code>s using derived Types <a href="#PALEOboxes.VariableReaction"><code>VariableReaction</code></a> which are links to <a href="#PALEOboxes.VariableDomain"><code>VariableDomain</code></a>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Types.jl#L57-L62">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.VariableType" href="#PALEOboxes.VariableType"><code>PALEOboxes.VariableType</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">@enum VariableType</code></pre><p>Enumeration of <code>VariableBase</code> subtypes. Allowed values:</p><ul><li><code>VariableReaction</code>: <code>VT_ReactProperty</code>, <code>VT_ReactDependency</code>, <code>VT_ReactContributor</code>, <code>VT_ReactTarget</code></li><li><code>VariableDomain</code> : <code>VT_DomPropDep</code>, <code>VT_DomContribTarget</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Types.jl#L88-L94">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.VariableDomain" href="#PALEOboxes.VariableDomain"><code>PALEOboxes.VariableDomain</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VariableDomain</code></pre><p>Host (<a href="#PALEOboxes.Domain"><code>Domain</code></a>) model variable.</p><p>See also: <a href="#PALEOboxes.VariableDomPropDep"><code>VariableDomPropDep</code></a>, <a href="#PALEOboxes.VariableDomContribTarget"><code>VariableDomContribTarget</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Types.jl#L105-L111">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.VariableDomPropDep" href="#PALEOboxes.VariableDomPropDep"><code>PALEOboxes.VariableDomPropDep</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VariableDomPropDep</code></pre><p><a href="#PALEOboxes.Model"><code>Model</code></a> (<a href="#PALEOboxes.Domain"><code>Domain</code></a>) <code>VariableDomain</code> linking a single <code>VariableReaction{VT_ReactProperty}</code> to multiple <code>VariableReaction{VT_ReactDependency}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/VariableDomain.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.VariableDomContribTarget" href="#PALEOboxes.VariableDomContribTarget"><code>PALEOboxes.VariableDomContribTarget</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VariableDomContribTarget</code></pre><p><a href="#PALEOboxes.Model"><code>Model</code></a> (<a href="#PALEOboxes.Domain"><code>Domain</code></a>) <code>VariableDomain</code> linking a single <code>VariableReaction{VT_ReactTarget}</code> to multiple <code>VariableReaction{VT_ReactContributor}</code> and <code>VariableReaction{VT_ReactDependency}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/VariableDomain.jl#L22-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.VariableReaction" href="#PALEOboxes.VariableReaction"><code>PALEOboxes.VariableReaction</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VariableReaction{T}</code></pre><p>Reaction view on a model variable.</p><p>Reactions define <a href="../Reaction API/#PALEOboxes.AbstractVarList"><code>AbstractVarList</code></a>s of <code>VariableReaction</code>s when creating a <a href="../Reaction API/#PALEOboxes.ReactionMethod"><code>ReactionMethod</code></a>. These are used to create to <a href="#PALEOboxes.VariableDomain"><code>VariableDomain</code></a> variables when the model is initialised,  linking together <code>VariableReaction</code>s with the same name.  <code>views</code> on Domain data Arrays are then passed to the <a href="../Reaction API/#PALEOboxes.ReactionMethod"><code>ReactionMethod</code></a> function at each timestep.</p><p>The Type parameter <code>T</code> is one of <code>VT_ReactProperty</code>, <code>VT_ReactDependency</code>, <code>VT_ReactContributor</code>, <code>VT_ReactTarget</code>.</p><p><code>localname</code> identifies the <code>VariableReaction</code> within the <code>Reaction</code>, and can be used to set <code>variable_attributes:</code> and <code>variable_links:</code> in the .yaml configuration file.</p><p><code>linkreq_domain.linkreq_subdomain.linkreq_name</code> defines the Domain, Subdomain and name for run-time linking to <a href="#PALEOboxes.VariableDomain"><code>VariableDomain</code></a> variables. </p><p>Not created directly - see <a href="../Reaction API/#PALEOboxes.CreateVariableReaction"><code>CreateVariableReaction</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/VariableReaction.jl#L3-L22">source</a></section></article><h3 id="Variable-Attributes"><a class="docs-heading-anchor" href="#Variable-Attributes">Variable Attributes</a><a id="Variable-Attributes-1"></a><a class="docs-heading-anchor-permalink" href="#Variable-Attributes" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Attribute" href="#PALEOboxes.Attribute"><code>PALEOboxes.Attribute</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Attribute{T}</code></pre><p>Definition for Variable attribute <code>name</code>. Defines a data type <code>T</code>, a <code>default_value</code>, <code>required</code> (<code>true</code> if always present ie added with <code>default_value</code> when Variable is created), <code>units</code>, and an optional <code>description</code>.</p><p>Note that Variable attributes are stored as a per-Variable <code>Dict(name =&gt; value)</code>, these definitions are only used to provide defaults, check types, and provide descriptive metadata.</p><p><code>ParseFromString</code> should usually be <code>false</code>: a value of <code>Type T</code> is then required when calling <a href="../Reaction API/#PALEOboxes.set_attribute!"><code>set_attribute!</code></a>. If <code>ParseFromString</code> is <code>true</code>, then <a href="../Reaction API/#PALEOboxes.set_attribute!"><code>set_attribute!</code></a> will accept an <code>AbstractString</code> and call <code>Base.parse(T, strvalue)</code> to convert to <code>T</code>. This allows eg an enum-valued Attribute to be defined by Attribute{EnumType, true} and implementing parse(EnumType, rawvalue::AbstractString)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/VariableAttributes.jl#L97-L110">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.StandardAttributes" href="#PALEOboxes.StandardAttributes"><code>PALEOboxes.StandardAttributes</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">StandardAttributes</code></pre><p>List of standard Variable attributes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/VariableAttributes.jl#L121-L125">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.get_attribute" href="#PALEOboxes.get_attribute"><code>PALEOboxes.get_attribute</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_attribute(var::VariableBase, name::Symbol, missing_value=missing) -&gt; value</code></pre><p>Get Variable attribute.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/VariableAttributes.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.VariableFunction" href="#PALEOboxes.VariableFunction"><code>PALEOboxes.VariableFunction</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">@enum VariableFunction</code></pre><p>Allowed values of <code>:vfunction</code> Variable <a href="#PALEOboxes.Attribute"><code>Attribute</code></a>,  defining the Variable function to the host ODE or DAE solver.</p><p>Explicit ODE problems with dS/dt = F(S) consist of pairs of S::VF<em>StateExplicit, F::VF</em>Deriv Variables.</p><p>An implicit ODE problem with dU/dt = F(U) where Total variables U are functions U(S) of State variables S will consist of pairs of U::VF<em>Total and F::VF</em>Deriv Variables, and also the same number of S::VF_State (in  no particular order).</p><p>Algebraic constraints  C(S) = 0 include variables C::VF<em>Constraint and the same number of S::VF</em>State, with no corresponding VF_Deriv.</p><p>Not all solvers support all combinations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/VariableAttributes.jl#L44-L60">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.VariablePhase" href="#PALEOboxes.VariablePhase"><code>PALEOboxes.VariablePhase</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">@enum VariablePhase</code></pre><p>Allowed values of <code>:vphase</code> Variable <a href="#PALEOboxes.Attribute"><code>Attribute</code></a>, defining the component phase this Variable belongs to  for multiphase cells.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/VariableAttributes.jl#L76-L81">source</a></section></article><p>TODO standard Variable names.</p><p>Use NetCDF CF standard names <a href="https://cfconventions.org/Data/cf-standard-names/76/build/cf-standard-name-table.html">https://cfconventions.org/Data/cf-standard-names/76/build/cf-standard-name-table.html</a> ?</p><h2 id="Fields"><a class="docs-heading-anchor" href="#Fields">Fields</a><a id="Fields-1"></a><a class="docs-heading-anchor-permalink" href="#Fields" title="Permalink"></a></h2><p>Field, data and function space are defined by Variable <a href="#PALEOboxes.Attribute"><code>Attribute</code></a>s in combination with an <a href="#PALEOboxes.AbstractMesh"><code>AbstractMesh</code></a></p><ul><li><code>:field_data</code> and optionally <code>:data_dims</code> define the subtype of <a href="#PALEOboxes.AbstractData"><code>AbstractData</code></a></li><li><code>:space</code> defines the subtype of <a href="#PALEOboxes.AbstractSpace"><code>AbstractSpace</code></a></li></ul><p>Examples:</p><ul><li><code>:field_data</code> = <a href="#PALEOboxes.ScalarData"><code>ScalarData</code></a>, <code>:space</code> = <a href="#PALEOboxes.ScalarSpace"><code>ScalarSpace</code></a> defines a Domain scalar (0D) quantity.</li><li><code>:field_data</code> = <a href="#PALEOboxes.IsotopeLinear"><code>IsotopeLinear</code></a>, <code>:space</code> = <a href="#PALEOboxes.ScalarSpace"><code>ScalarSpace</code></a> defines a Domain scalar (0D) isotope quantity.</li><li><code>:field_data</code> = <a href="#PALEOboxes.ScalarData"><code>ScalarData</code></a>, <code>:space</code> = <a href="#PALEOboxes.CellSpace"><code>CellSpace</code></a> defines a per-cell quantity in a spatial Domain.</li><li><code>:field_data</code> = <a href="#PALEOboxes.ArrayScalarData"><code>ArrayScalarData</code></a>, <code>:data_dims =(&quot;wgrid&quot;,)</code> <code>:space</code> = <a href="#PALEOboxes.ScalarSpace"><code>ScalarSpace</code></a> defines a Domain scalar (0D) quantity on a wavelength grid, a Vector of length given by the value of the Domain &quot;wgrid&quot; data dimension (see <a href="../Reaction API/#PALEOboxes.set_data_dimension!"><code>set_data_dimension!</code></a>)</li></ul><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.Field" href="#PALEOboxes.Field"><code>PALEOboxes.Field</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Field{D &lt;: AbstractData, S &lt;: AbstractSpace, V, N, M}</code></pre><p>A Field of data type <code>D</code> defined on function space <code>S</code> over <code>mesh</code> and (optionally) <code>data_dims</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L332-L336">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.get_field" href="#PALEOboxes.get_field"><code>PALEOboxes.get_field</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_field(obj, ...) -&gt; Field</code></pre><p>Get Field from PALEO object <code>obj</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L343-L347">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.wrap_field" href="#PALEOboxes.wrap_field"><code>PALEOboxes.wrap_field</code></a> — <span class="docstring-category">Function</span></header><section><div><p>create a new Field, containing supplied <code>existing_values</code> data arrays</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L370">source</a></section></article><h2 id="Spaces"><a class="docs-heading-anchor" href="#Spaces">Spaces</a><a id="Spaces-1"></a><a class="docs-heading-anchor-permalink" href="#Spaces" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.AbstractSpace" href="#PALEOboxes.AbstractSpace"><code>PALEOboxes.AbstractSpace</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSpace</code></pre><p>Defines a function space within a Domain, on a mesh defined by a Grid </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L6-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.ScalarSpace" href="#PALEOboxes.ScalarSpace"><code>PALEOboxes.ScalarSpace</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ScalarSpace &lt;: AbstractSpace</code></pre><p>A Domain position-independent quantity</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L13-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.CellSpace" href="#PALEOboxes.CellSpace"><code>PALEOboxes.CellSpace</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CellSpace &lt;: AbstractSpace</code></pre><p>A per-cell quantity. Use as Variable attribute :space to create a Variable with data array dimensions from Grid</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L21-L25">source</a></section></article><h2 id="Data-types"><a class="docs-heading-anchor" href="#Data-types">Data types</a><a id="Data-types-1"></a><a class="docs-heading-anchor-permalink" href="#Data-types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.AbstractData" href="#PALEOboxes.AbstractData"><code>PALEOboxes.AbstractData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractData</code></pre><p>Defines a Data type that can be composed with an <a href="#PALEOboxes.AbstractSpace"><code>AbstractSpace</code></a> to form a Field</p><p>Concrete subtypes should implement:</p><p><a href="#PALEOboxes.allocate_values"><code>allocate_values</code></a>, <a href="#PALEOboxes.check_values"><code>check_values</code></a>, <a href="#PALEOboxes.zero_values!"><code>zero_values!</code></a>, <a href="#PALEOboxes.dof_values"><code>dof_values</code></a>, <a href="#PALEOboxes.get_values_output"><code>get_values_output</code></a></p><p>If the subtype needs to provide values for a numerical solver (eg as a state variable), it also needs to implement:</p><p><a href="#PALEOboxes.init_values!"><code>init_values!</code></a>, <a href="#PALEOboxes.copyfieldto!"><code>copyfieldto!</code></a>, <a href="#PALEOboxes.copytofield!"><code>copytofield!</code></a>, <a href="#PALEOboxes.add_field!"><code>add_field!</code></a>, <a href="#PALEOboxes.add_field_vec!"><code>add_field_vec!</code></a></p><p>If the subtype has a representation as components, it should implement: <a href="#PALEOboxes.num_components-Tuple{Type{var&quot;#s6&quot;} where var&quot;#s6&quot;&lt;:PALEOboxes.AbstractData}"><code>num_components</code></a>, <a href="#PALEOboxes.get_components"><code>get_components</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L86-L102">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.UndefinedData" href="#PALEOboxes.UndefinedData"><code>PALEOboxes.UndefinedData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">UndefinedData &lt;: AbstractData</code></pre><p>Undefined data type (no methods implemented). Used to indicate that a Variable can link to any data type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L318-L322">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.ScalarData" href="#PALEOboxes.ScalarData"><code>PALEOboxes.ScalarData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ScalarData &lt;: AbstractData</code></pre><p>A Field scalar (eg a biogeochemical concentration)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/data/ScalarData.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.ArrayScalarData" href="#PALEOboxes.ArrayScalarData"><code>PALEOboxes.ArrayScalarData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ArrayScalarData &lt;: AbstractData</code></pre><p>An Array of Field scalars (eg a intensity on a wavelength grid).</p><p>NB: only implements minimal methods sufficient to allow use as a model internal variable, not as a state variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/data/ArrayScalarData.jl#L5-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.allocate_values" href="#PALEOboxes.allocate_values"><code>PALEOboxes.allocate_values</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">allocate_values(
    field_data::Type{&lt;:AbstractData}, data_dims::Tuple{Vararg{NamedDimension}}, data_type, space::Type{&lt;:AbstractSpace}, spatial_size::Tuple;
    thread_safe::Bool, allocatenans::Bool,
) -&gt; values</code></pre><p>allocate <code>Field.values</code> (eg an Array) for <code>field_data</code> with dimensions defined by <code>spatial_size</code> and <code>data_dims</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L106-L113">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.check_values" href="#PALEOboxes.check_values"><code>PALEOboxes.check_values</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">check_values(
    existing_values, 
    field_data::Type{&lt;:AbstractData},
    data_dims::Tuple{Vararg{NamedDimension}}, 
    data_type, 
    space::Type{&lt;:AbstractSpace}, 
    spatial_size::Tuple{Integer, Vararg{Integer}}
)</code></pre><p>Check <code>existing_values</code> is of suitable type, size etc for use as <code>Field.values</code>, throw exception if not.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L124-L135">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.zero_values!" href="#PALEOboxes.zero_values!"><code>PALEOboxes.zero_values!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">zero_values!(values, field_data::Type{&lt;:AbstractData}, data_dims::Tuple{Vararg{NamedDimension}}, space::Type{&lt;:AbstractSpace}, cellrange)</code></pre><p>Set <code>values</code> over spatial region <code>cellrange</code> to zero at start of main loop </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L184-L188">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.dof_values" href="#PALEOboxes.dof_values"><code>PALEOboxes.dof_values</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dof_values(
    field_data::Type{&lt;:AbstractData}, 
    data_dims::Tuple{Vararg{NamedDimension}}, 
    space::Type{&lt;:AbstractSpace}, 
    mesh, 
    cellrange
) -&gt; dof::Int</code></pre><p>Return degrees-of-freedom for <code>field_data</code> over spatial region <code>cellrange</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L208-L218">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.get_values_output" href="#PALEOboxes.get_values_output"><code>PALEOboxes.get_values_output</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Optional: sanitize <code>values</code> for storing as model output. Default implementation is usually OK - only implement eg for Atomic types that should be converted to standard types for storage</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L307-L309">source</a></section><section><div><p>sanitized version of <code>values</code>, suitable for storing as output</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L419">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.init_values!" href="#PALEOboxes.init_values!"><code>PALEOboxes.init_values!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">init_values!(
    values, field_data::Type{&lt;:AbstractData}, data_dims::Tuple{Vararg{NamedDimension}}, space::Type{&lt;:AbstractSpace},
    init_value::Symbol, attribv::VariableBase, convertfn, convertvalues, cellrange, info::NTuple{3, String}
)</code></pre><p>Initialize <code>values</code> at model start to <code>init_value</code> over region <code>cellrange</code> using information from Variable <code>attribv</code> attributes, scaled by <code>convertfn</code> and <code>convertvalues</code>. </p><p>Optional: only required if this <code>field_data</code> type is used for a model (state) Variable that requires initialisation.</p><p>Arguments:</p><ul><li><code>values</code>: data to be zeroed</li><li><code>init_value::Symbol</code>: one of :initial<em>value, :norm</em>value, requesting type of initial value required</li><li><code>attribv::VariableBase</code>: Variable with attributes to use for initialisation</li><li><code>convertfn::Function</code>:  apply multiplier <code>convertfn(convertvalues, i)</code> to initialisation value for cell i. Typically this is used to convert units eg concentration to mol.</li><li><code>convertvalues</code>: parameters (if any) required by <code>convertfn</code>, eg a volume measure.</li><li><code>cellrange</code>: range of cells to initialise</li><li><code>info::::NTuple{3, String}</code>: Tuple (varinfo, convertinfo, trsfrinfo) of identifier strings to use for log messages</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L156-L177">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.copyfieldto!" href="#PALEOboxes.copyfieldto!"><code>PALEOboxes.copyfieldto!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">copyfieldto!(
    dest,
    doff, 
    values, 
    field_data::Type{&lt;:AbstractData}, 
    data_dims::Tuple{Vararg{NamedDimension}}, 
    space::Type{&lt;:AbstractSpace}, 
    cellrange
) -&gt; num_copied::Int</code></pre><p>Copy Field.values <code>values</code> from spatial region defined by <code>cellrange</code>, to <code>dest</code> Array starting at index <code>doff</code>.</p><p>Number of values over whole Domain should equal degrees-of-freedom returned by <a href="#PALEOboxes.dof_values"><code>dof_values</code></a></p><p>Required if this <code>field_data</code> type needs to provide values for a numerical solver.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L222-L238">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.copytofield!" href="#PALEOboxes.copytofield!"><code>PALEOboxes.copytofield!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">copytofield!(
    values,
    field_data::Type{&lt;:AbstractData},
    data_dims::Tuple{Vararg{NamedDimension}},
    space::Type{&lt;:AbstractSpace},
    cellrange, 
    src, 
    soff
) -&gt; num_copied::Int</code></pre><p>Copy from <code>src</code> Array starting at index <code>soff</code> to Field.values <code>values</code> for spatial region defined by <code>cellrange</code>.</p><p>Number of values over whole Domain should equal degrees-of-freedom returned by <a href="#PALEOboxes.dof_values"><code>dof_values</code></a></p><p>Required if this <code>field_data</code> type needs to provide values for a numerical solver.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L242-L258">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.add_field!" href="#PALEOboxes.add_field!"><code>PALEOboxes.add_field!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_field!(obj, f::Field ...)</code></pre><p>Add Field or Field to PALEO object <code>obj</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L350-L354">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.add_field_vec!" href="#PALEOboxes.add_field_vec!"><code>PALEOboxes.add_field_vec!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_field_vec!(
    dest, 
    field_data::Type{&lt;:AbstractData}, 
    data_dims::Tuple{Vararg{NamedDimension}}, 
    space::Type{&lt;:AbstractSpace}, 
    a, 
    cellrange,
    src, 
    soff
) -&gt; num_added::Int</code></pre><p>Implement <code>dest += a*src</code> where <code>dest</code> is a Field.values, <code>src</code> is an Array, <code>a</code> is a number, over region defined by <code>cellrange</code>, starting at index <code>soff</code> in <code>src</code>.</p><p>Returns number of elements of <code>src</code> used.</p><p>See  <a href="#PALEOboxes.copytofield!"><code>copytofield!</code></a>, <a href="#PALEOboxes.copyfieldto!"><code>copyfieldto!</code></a> for the relationship between Array <code>src</code> and Field values <code>dest</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L270-L288">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.num_components-Tuple{Type{var&quot;#s6&quot;} where var&quot;#s6&quot;&lt;:PALEOboxes.AbstractData}" href="#PALEOboxes.num_components-Tuple{Type{var&quot;#s6&quot;} where var&quot;#s6&quot;&lt;:PALEOboxes.AbstractData}"><code>PALEOboxes.num_components</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">num_components(field_data::Type{&lt;:AbstractData}) -&gt; Int</code></pre><p>get number of components (optional - implement if <code>field_data</code> has a representation as components)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L292-L296">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.get_components" href="#PALEOboxes.get_components"><code>PALEOboxes.get_components</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_components(values, field_data::Type{&lt;:AbstractData}) -&gt; Vector</code></pre><p>Convert Field <code>values</code> to a Vector of components (optional - implement if <code>field_data</code> has a representation as components)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/Fields.jl#L299-L304">source</a></section></article><h3 id="Isotopes"><a class="docs-heading-anchor" href="#Isotopes">Isotopes</a><a id="Isotopes-1"></a><a class="docs-heading-anchor-permalink" href="#Isotopes" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.AbstractIsotopeScalar" href="#PALEOboxes.AbstractIsotopeScalar"><code>PALEOboxes.AbstractIsotopeScalar</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractIsotopeScalar &lt;: AbstractData</code></pre><p>An IsotopeScalar represents a quantity or flux with isotopic composition. Can be added, subtracted, multiplied by a scalar, and decomposed into components with the same (bulk) transport properties.</p><p><strong>Implementation</strong></p><p>Each IsotopeScalar should be added to <code>IsotopeTypes</code>, and implement:</p><ul><li>get_total(is::IsotopeScalar) -&gt; total</li><li>arithmetic operations +/- (ie IsotopeScalars can be added and subtracted) and *number, /number  (IsotopeScalars can be scaled by a real number).</li><li>methods of the <a href="#PALEOboxes.AbstractData"><code>AbstractData</code></a> interface</li></ul><p>and optional isotope-specific functions, eg for a single isotope:</p><ul><li>isotope_totaldelta(::Type{&lt;: IsotopeScalar}, total, delta) -&gt; IsotopeScalar()</li><li>get_delta(is::IsotopeScalar) -&gt; delta</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/data/IsotopeData.jl#L9-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.IsotopeLinear" href="#PALEOboxes.IsotopeLinear"><code>PALEOboxes.IsotopeLinear</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IsotopeLinear &lt;: AbstractIsotopeScalar</code></pre><p>Linearized representation of isotopic composition, where  <code>moldelta</code> = <code>total</code> * <code>delta</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/data/IsotopeData.jl#L92-L97">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.isotope_totaldelta" href="#PALEOboxes.isotope_totaldelta"><code>PALEOboxes.isotope_totaldelta</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">isotope_totaldelta(::Type{IsotopeLinear}, total, delta) -&gt; IsotopeLinear</code></pre><p>Create an <code>IsotopeLinear</code> from <code>total</code> and <code>delta</code></p><p><strong>Examples:</strong></p><pre><code class="language-julia-repl hljs">julia&gt; a = PB.isotope_totaldelta(PB.IsotopeLinear, 10.0, -2.0)
(v=10.0, v_moldelta=-20.0, ‰=-2.0)

julia&gt; b = a*2
(v=20.0, v_moldelta=-40.0, ‰=-2.0)

julia&gt; c = a + b
(v=30.0, v_moldelta=-60.0, ‰=-2.0)

julia&gt; PB.get_total(c)
30.0

julia&gt; PB.get_delta(c)
-2.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/data/IsotopeData.jl#L121-L143">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.get_total" href="#PALEOboxes.get_total"><code>PALEOboxes.get_total</code></a> — <span class="docstring-category">Function</span></header><section><div><p>generic get_total for non-isotope variable</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/data/IsotopeData.jl#L51">source</a></section><section><div><pre><code class="nohighlight hljs">get_total(is::IsotopeLinear) -&gt; T</code></pre><p>Get isotope delta (per mil)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/data/IsotopeData.jl#L147-L151">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PALEOboxes.get_delta" href="#PALEOboxes.get_delta"><code>PALEOboxes.get_delta</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_delta(is::IsotopeLinear) -&gt; T</code></pre><p>Get isotope delta (per mil)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PALEOtoolkit/PALEOboxes.jl/blob/cf1af1cbd93a3b77825f6e745ded90133727bd63/src/data/IsotopeData.jl#L156-L160">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../CreateInitializeLoop/">« Control flow</a><a class="docs-footer-nextpage" href="../Solver API/">Solver API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.16 on <span class="colophon-date" title="Tuesday 26 April 2022 19:19">Tuesday 26 April 2022</span>. Using Julia version 1.6.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
